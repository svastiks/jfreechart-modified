<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>CategoryPlotTest.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">jfreechart (Mar 14, 2025 5:50:17â€¯p.m.)</a> &gt; <a href="../../index.html" class="el_group">jfreechart</a> &gt; <a href="../index.html" class="el_bundle">src/test/java</a> &gt; <a href="index.source.html" class="el_package">org.jfree.chart.plot</a> &gt; <span class="el_source">CategoryPlotTest.java</span></div><h1>CategoryPlotTest.java</h1><pre class="source lang-java linenums">/* ===========================================================
 * JFreeChart : a free chart library for the Java(tm) platform
 * ===========================================================
 *
 * (C) Copyright 2000-2022, by David Gilbert and Contributors.
 *
 * Project Info:  http://www.jfree.org/jfreechart/index.html
 *
 * This library is free software; you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation; either version 2.1 of the License, or
 * (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public
 * License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301,
 * USA.
 *
 * [Oracle and Java are registered trademarks of Oracle and/or its affiliates. 
 * Other names may be trademarks of their respective owners.]
 *
 * ---------------------
 * CategoryPlotTest.java
 * ---------------------
 * (C) Copyright 2003-2022, by David Gilbert and Contributors.
 *
 * Original Author:  David Gilbert;
 * Contributor(s):   -;
 *
 */

package org.jfree.chart.plot;

import org.junit.jupiter.api.Test;

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.GradientPaint;
import java.awt.Graphics2D;
import java.awt.Stroke;
import java.awt.geom.Line2D;
import java.awt.geom.Rectangle2D;
import java.awt.image.BufferedImage;
import java.util.Arrays;
import java.util.EventListener;
import java.util.List;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.legend.LegendItem;
import org.jfree.chart.legend.LegendItemCollection;
import org.jfree.chart.TestUtils;
import org.jfree.chart.annotations.CategoryLineAnnotation;
import org.jfree.chart.annotations.CategoryTextAnnotation;
import org.jfree.chart.axis.AxisLocation;
import org.jfree.chart.axis.AxisSpace;
import org.jfree.chart.axis.CategoryAnchor;
import org.jfree.chart.axis.CategoryAxis;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.event.MarkerChangeListener;
import org.jfree.chart.renderer.category.AreaRenderer;
import org.jfree.chart.renderer.category.BarRenderer;
import org.jfree.chart.renderer.category.CategoryItemRenderer;
import org.jfree.chart.renderer.category.DefaultCategoryItemRenderer;
import org.jfree.chart.renderer.category.LineAndShapeRenderer;
import org.jfree.chart.api.Layer;
import org.jfree.chart.api.RectangleInsets;
import org.jfree.chart.internal.CloneUtils;
import org.jfree.chart.util.DefaultShadowGenerator;
import org.jfree.chart.api.SortOrder;
import org.jfree.data.Range;
import org.jfree.data.category.CategoryDataset;
import org.jfree.data.category.DefaultCategoryDataset;

import static org.junit.jupiter.api.Assertions.*;

/**
 * Tests for the {@link CategoryPlot} class.
 */
<span class="fc" id="L85">public class CategoryPlotTest {</span>

    /**
     * Some checks for the constructor.
     */
    @Test
    public void testConstructor() {
<span class="fc" id="L92">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L93">        assertEquals(RectangleInsets.ZERO_INSETS, plot.getAxisOffset());</span>
<span class="fc" id="L94">    }</span>

    /**
     * A test for a bug reported in the forum.
     */
    @Test
    public void testAxisRange() {
<span class="fc" id="L101">        DefaultCategoryDataset&lt;String, String&gt; datasetA = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L102">        DefaultCategoryDataset&lt;String, String&gt; datasetB = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L103">        datasetB.addValue(50.0, &quot;R1&quot;, &quot;C1&quot;);</span>
<span class="fc" id="L104">        datasetB.addValue(80.0, &quot;R1&quot;, &quot;C1&quot;);</span>
<span class="fc" id="L105">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(datasetA, </span>
                new CategoryAxis(null), new NumberAxis(null), 
                new LineAndShapeRenderer());
<span class="fc" id="L108">        plot.setDataset(1, datasetB);</span>
<span class="fc" id="L109">        plot.setRenderer(1, new LineAndShapeRenderer());</span>
<span class="fc" id="L110">        Range r = plot.getRangeAxis().getRange();</span>
<span class="fc" id="L111">        assertEquals(84.0, r.getUpperBound(), 0.00001);</span>
<span class="fc" id="L112">    }</span>

    /**
     * Test that the equals() method differentiates all the required fields.
     */
    @Test
    public void testEquals() {
<span class="fc" id="L119">        CategoryPlot&lt;String, String&gt; plot1 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L120">        CategoryPlot&lt;String, String&gt; plot2 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L121">        assertEquals(plot1, plot2);</span>
<span class="fc" id="L122">        assertEquals(plot2, plot1);</span>

        // orientation...
<span class="fc" id="L125">        plot1.setOrientation(PlotOrientation.HORIZONTAL);</span>
<span class="fc" id="L126">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L127">        plot2.setOrientation(PlotOrientation.HORIZONTAL);</span>
<span class="fc" id="L128">        assertEquals(plot1, plot2);</span>

        // axisOffset...
<span class="fc" id="L131">        plot1.setAxisOffset(new RectangleInsets(0.05, 0.05, 0.05, 0.05));</span>
<span class="fc" id="L132">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L133">        plot2.setAxisOffset(new RectangleInsets(0.05, 0.05, 0.05, 0.05));</span>
<span class="fc" id="L134">        assertEquals(plot1, plot2);</span>

        // domainAxis - no longer a separate field but test anyway...
<span class="fc" id="L137">        plot1.setDomainAxis(new CategoryAxis(&quot;Category Axis&quot;));</span>
<span class="fc" id="L138">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L139">        plot2.setDomainAxis(new CategoryAxis(&quot;Category Axis&quot;));</span>
<span class="fc" id="L140">        assertEquals(plot1, plot2);</span>

        // domainAxes...
<span class="fc" id="L143">        plot1.setDomainAxis(11, new CategoryAxis(&quot;Secondary Axis&quot;));</span>
<span class="fc" id="L144">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L145">        plot2.setDomainAxis(11, new CategoryAxis(&quot;Secondary Axis&quot;));</span>
<span class="fc" id="L146">        assertEquals(plot1, plot2);</span>

        // domainAxisLocation - no longer a separate field but test anyway...
<span class="fc" id="L149">        plot1.setDomainAxisLocation(AxisLocation.TOP_OR_RIGHT);</span>
<span class="fc" id="L150">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L151">        plot2.setDomainAxisLocation(AxisLocation.TOP_OR_RIGHT);</span>
<span class="fc" id="L152">        assertEquals(plot1, plot2);</span>

        // domainAxisLocations...
<span class="fc" id="L155">        plot1.setDomainAxisLocation(11, AxisLocation.TOP_OR_RIGHT);</span>
<span class="fc" id="L156">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L157">        plot2.setDomainAxisLocation(11, AxisLocation.TOP_OR_RIGHT);</span>
<span class="fc" id="L158">        assertEquals(plot1, plot2);</span>

        // draw shared domain axis...
<span class="pc bpc" id="L161" title="1 of 2 branches missed.">        plot1.setDrawSharedDomainAxis(!plot1.getDrawSharedDomainAxis());</span>
<span class="fc" id="L162">        assertNotEquals(plot1, plot2);</span>
<span class="pc bpc" id="L163" title="1 of 2 branches missed.">        plot2.setDrawSharedDomainAxis(!plot2.getDrawSharedDomainAxis());</span>
<span class="fc" id="L164">        assertEquals(plot1, plot2);</span>

        // rangeAxis - no longer a separate field but test anyway...
<span class="fc" id="L167">        plot1.setRangeAxis(new NumberAxis(&quot;Range Axis&quot;));</span>
<span class="fc" id="L168">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L169">        plot2.setRangeAxis(new NumberAxis(&quot;Range Axis&quot;));</span>
<span class="fc" id="L170">        assertEquals(plot1, plot2);</span>

        // rangeAxes...
<span class="fc" id="L173">        plot1.setRangeAxis(11, new NumberAxis(&quot;Secondary Range Axis&quot;));</span>
<span class="fc" id="L174">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L175">        plot2.setRangeAxis(11, new NumberAxis(&quot;Secondary Range Axis&quot;));</span>
<span class="fc" id="L176">        assertEquals(plot1, plot2);</span>

        // rangeAxisLocation - no longer a separate field but test anyway...
<span class="fc" id="L179">        plot1.setRangeAxisLocation(AxisLocation.TOP_OR_RIGHT);</span>
<span class="fc" id="L180">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L181">        plot2.setRangeAxisLocation(AxisLocation.TOP_OR_RIGHT);</span>
<span class="fc" id="L182">        assertEquals(plot1, plot2);</span>

        // rangeAxisLocations...
<span class="fc" id="L185">        plot1.setRangeAxisLocation(11, AxisLocation.TOP_OR_RIGHT);</span>
<span class="fc" id="L186">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L187">        plot2.setRangeAxisLocation(11, AxisLocation.TOP_OR_RIGHT);</span>
<span class="fc" id="L188">        assertEquals(plot1, plot2);</span>

        // datasetToDomainAxisMap...
<span class="fc" id="L191">        plot1.mapDatasetToDomainAxis(11, 11);</span>
<span class="fc" id="L192">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L193">        plot2.mapDatasetToDomainAxis(11, 11);</span>
<span class="fc" id="L194">        assertEquals(plot1, plot2);</span>

        // datasetToRangeAxisMap...
<span class="fc" id="L197">        plot1.mapDatasetToRangeAxis(11, 11);</span>
<span class="fc" id="L198">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L199">        plot2.mapDatasetToRangeAxis(11, 11);</span>
<span class="fc" id="L200">        assertEquals(plot1, plot2);</span>

        // renderer - no longer a separate field but test anyway...
<span class="fc" id="L203">        plot1.setRenderer(new AreaRenderer());</span>
<span class="fc" id="L204">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L205">        plot2.setRenderer(new AreaRenderer());</span>
<span class="fc" id="L206">        assertEquals(plot1, plot2);</span>

        // renderers...
<span class="fc" id="L209">        plot1.setRenderer(11, new AreaRenderer());</span>
<span class="fc" id="L210">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L211">        plot2.setRenderer(11, new AreaRenderer());</span>
<span class="fc" id="L212">        assertEquals(plot1, plot2);</span>

        // rendering order...
<span class="fc" id="L215">        plot1.setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);</span>
<span class="fc" id="L216">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L217">        plot2.setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);</span>
<span class="fc" id="L218">        assertEquals(plot1, plot2);</span>

        // columnRenderingOrder...
<span class="fc" id="L221">        plot1.setColumnRenderingOrder(SortOrder.DESCENDING);</span>
<span class="fc" id="L222">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L223">        plot2.setColumnRenderingOrder(SortOrder.DESCENDING);</span>
<span class="fc" id="L224">        assertEquals(plot1, plot2);</span>

        // rowRenderingOrder...
<span class="fc" id="L227">        plot1.setRowRenderingOrder(SortOrder.DESCENDING);</span>
<span class="fc" id="L228">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L229">        plot2.setRowRenderingOrder(SortOrder.DESCENDING);</span>
<span class="fc" id="L230">        assertEquals(plot1, plot2);</span>

        // domainGridlinesVisible
<span class="fc" id="L233">        plot1.setDomainGridlinesVisible(true);</span>
<span class="fc" id="L234">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L235">        plot2.setDomainGridlinesVisible(true);</span>
<span class="fc" id="L236">        assertEquals(plot1, plot2);</span>

        // domainGridlinePosition
<span class="fc" id="L239">        plot1.setDomainGridlinePosition(CategoryAnchor.END);</span>
<span class="fc" id="L240">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L241">        plot2.setDomainGridlinePosition(CategoryAnchor.END);</span>
<span class="fc" id="L242">        assertEquals(plot1, plot2);</span>

        // domainGridlineStroke
<span class="fc" id="L245">        Stroke stroke = new BasicStroke(2.0f);</span>
<span class="fc" id="L246">        plot1.setDomainGridlineStroke(stroke);</span>
<span class="fc" id="L247">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L248">        plot2.setDomainGridlineStroke(stroke);</span>
<span class="fc" id="L249">        assertEquals(plot1, plot2);</span>

        // domainGridlinePaint
<span class="fc" id="L252">        plot1.setDomainGridlinePaint(new GradientPaint(1.0f, 2.0f, Color.BLUE,</span>
                3.0f, 4.0f, Color.YELLOW));
<span class="fc" id="L254">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L255">        plot2.setDomainGridlinePaint(new GradientPaint(1.0f, 2.0f, Color.BLUE,</span>
                3.0f, 4.0f, Color.YELLOW));
<span class="fc" id="L257">        assertEquals(plot1, plot2);</span>

        // rangeGridlinesVisible
<span class="fc" id="L260">        plot1.setRangeGridlinesVisible(false);</span>
<span class="fc" id="L261">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L262">        plot2.setRangeGridlinesVisible(false);</span>
<span class="fc" id="L263">        assertEquals(plot1, plot2);</span>

        // rangeGridlineStroke
<span class="fc" id="L266">        plot1.setRangeGridlineStroke(stroke);</span>
<span class="fc" id="L267">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L268">        plot2.setRangeGridlineStroke(stroke);</span>
<span class="fc" id="L269">        assertEquals(plot1, plot2);</span>

        // rangeGridlinePaint
<span class="fc" id="L272">        plot1.setRangeGridlinePaint(new GradientPaint(1.0f, 2.0f, Color.GREEN,</span>
                3.0f, 4.0f, Color.YELLOW));
<span class="fc" id="L274">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L275">        plot2.setRangeGridlinePaint(new GradientPaint(1.0f, 2.0f, Color.GREEN,</span>
                3.0f, 4.0f, Color.YELLOW));
<span class="fc" id="L277">        assertEquals(plot1, plot2);</span>

        // anchorValue
<span class="fc" id="L280">        plot1.setAnchorValue(100.0);</span>
<span class="fc" id="L281">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L282">        plot2.setAnchorValue(100.0);</span>
<span class="fc" id="L283">        assertEquals(plot1, plot2);</span>

        // rangeCrosshairVisible
<span class="fc" id="L286">        plot1.setRangeCrosshairVisible(true);</span>
<span class="fc" id="L287">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L288">        plot2.setRangeCrosshairVisible(true);</span>
<span class="fc" id="L289">        assertEquals(plot1, plot2);</span>

        // rangeCrosshairValue
<span class="fc" id="L292">        plot1.setRangeCrosshairValue(100.0);</span>
<span class="fc" id="L293">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L294">        plot2.setRangeCrosshairValue(100.0);</span>
<span class="fc" id="L295">        assertEquals(plot1, plot2);</span>

        // rangeCrosshairStroke
<span class="fc" id="L298">        plot1.setRangeCrosshairStroke(stroke);</span>
<span class="fc" id="L299">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L300">        plot2.setRangeCrosshairStroke(stroke);</span>
<span class="fc" id="L301">        assertEquals(plot1, plot2);</span>

        // rangeCrosshairPaint
<span class="fc" id="L304">        plot1.setRangeCrosshairPaint(new GradientPaint(1.0f, 2.0f, Color.WHITE,</span>
                3.0f, 4.0f, Color.YELLOW));
<span class="fc" id="L306">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L307">        plot2.setRangeCrosshairPaint(new GradientPaint(1.0f, 2.0f, Color.WHITE,</span>
                3.0f, 4.0f, Color.YELLOW));
<span class="fc" id="L309">        assertEquals(plot1, plot2);</span>

        // rangeCrosshairLockedOnData
<span class="fc" id="L312">        plot1.setRangeCrosshairLockedOnData(false);</span>
<span class="fc" id="L313">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L314">        plot2.setRangeCrosshairLockedOnData(false);</span>
<span class="fc" id="L315">        assertEquals(plot1, plot2);</span>

        // foreground domain markers
<span class="fc" id="L318">        plot1.addDomainMarker(new CategoryMarker(&quot;C1&quot;), Layer.FOREGROUND);</span>
<span class="fc" id="L319">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L320">        plot2.addDomainMarker(new CategoryMarker(&quot;C1&quot;), Layer.FOREGROUND);</span>
<span class="fc" id="L321">        assertEquals(plot1, plot2);</span>

        // background domain markers
<span class="fc" id="L324">        plot1.addDomainMarker(new CategoryMarker(&quot;C2&quot;), Layer.BACKGROUND);</span>
<span class="fc" id="L325">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L326">        plot2.addDomainMarker(new CategoryMarker(&quot;C2&quot;), Layer.BACKGROUND);</span>
<span class="fc" id="L327">        assertEquals(plot1, plot2);</span>

        // range markers - no longer separate fields but test anyway...
<span class="fc" id="L330">        plot1.addRangeMarker(new ValueMarker(4.0), Layer.FOREGROUND);</span>
<span class="fc" id="L331">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L332">        plot2.addRangeMarker(new ValueMarker(4.0), Layer.FOREGROUND);</span>
<span class="fc" id="L333">        assertEquals(plot1, plot2);</span>

<span class="fc" id="L335">        plot1.addRangeMarker(new ValueMarker(5.0), Layer.BACKGROUND);</span>
<span class="fc" id="L336">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L337">        plot2.addRangeMarker(new ValueMarker(5.0), Layer.BACKGROUND);</span>
<span class="fc" id="L338">        assertEquals(plot1, plot2);</span>

        // foreground range markers...
<span class="fc" id="L341">        plot1.addRangeMarker(1, new ValueMarker(4.0), Layer.FOREGROUND);</span>
<span class="fc" id="L342">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L343">        plot2.addRangeMarker(1, new ValueMarker(4.0), Layer.FOREGROUND);</span>
<span class="fc" id="L344">        assertEquals(plot1, plot2);</span>

        // background range markers...
<span class="fc" id="L347">        plot1.addRangeMarker(1, new ValueMarker(5.0), Layer.BACKGROUND);</span>
<span class="fc" id="L348">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L349">        plot2.addRangeMarker(1, new ValueMarker(5.0), Layer.BACKGROUND);</span>
<span class="fc" id="L350">        assertEquals(plot1, plot2);</span>

        // annotations
<span class="fc" id="L353">        plot1.addAnnotation(new CategoryTextAnnotation(&quot;Text&quot;, &quot;Category&quot;,</span>
                43.0));
<span class="fc" id="L355">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L356">        plot2.addAnnotation(new CategoryTextAnnotation(&quot;Text&quot;, &quot;Category&quot;,</span>
                43.0));
<span class="fc" id="L358">        assertEquals(plot1, plot2);</span>

        // weight
<span class="fc" id="L361">        plot1.setWeight(3);</span>
<span class="fc" id="L362">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L363">        plot2.setWeight(3);</span>
<span class="fc" id="L364">        assertEquals(plot1, plot2);</span>

        // fixed domain axis space...
<span class="fc" id="L367">        plot1.setFixedDomainAxisSpace(new AxisSpace());</span>
<span class="fc" id="L368">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L369">        plot2.setFixedDomainAxisSpace(new AxisSpace());</span>
<span class="fc" id="L370">        assertEquals(plot1, plot2);</span>

        // fixed range axis space...
<span class="fc" id="L373">        plot1.setFixedRangeAxisSpace(new AxisSpace());</span>
<span class="fc" id="L374">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L375">        plot2.setFixedRangeAxisSpace(new AxisSpace());</span>
<span class="fc" id="L376">        assertEquals(plot1, plot2);</span>

        // fixed legend items
<span class="fc" id="L379">        plot1.setFixedLegendItems(new LegendItemCollection());</span>
<span class="fc" id="L380">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L381">        plot2.setFixedLegendItems(new LegendItemCollection());</span>
<span class="fc" id="L382">        assertEquals(plot1, plot2);</span>

        // crosshairDatasetIndex
<span class="fc" id="L385">        plot1.setCrosshairDatasetIndex(99);</span>
<span class="fc" id="L386">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L387">        plot2.setCrosshairDatasetIndex(99);</span>
<span class="fc" id="L388">        assertEquals(plot1, plot2);</span>

        // domainCrosshairColumnKey
<span class="fc" id="L391">        plot1.setDomainCrosshairColumnKey(&quot;A&quot;);</span>
<span class="fc" id="L392">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L393">        plot2.setDomainCrosshairColumnKey(&quot;A&quot;);</span>
<span class="fc" id="L394">        assertEquals(plot1, plot2);</span>

        // domainCrosshairRowKey
<span class="fc" id="L397">        plot1.setDomainCrosshairRowKey(&quot;B&quot;);</span>
<span class="fc" id="L398">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L399">        plot2.setDomainCrosshairRowKey(&quot;B&quot;);</span>
<span class="fc" id="L400">        assertEquals(plot1, plot2);</span>

        // domainCrosshairVisible
<span class="fc" id="L403">        plot1.setDomainCrosshairVisible(true);</span>
<span class="fc" id="L404">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L405">        plot2.setDomainCrosshairVisible(true);</span>
<span class="fc" id="L406">        assertEquals(plot1, plot2);</span>

        // domainCrosshairPaint
<span class="fc" id="L409">        plot1.setDomainCrosshairPaint(new GradientPaint(1.0f, 2.0f, Color.RED,</span>
                3.0f, 4.0f, Color.BLUE));
<span class="fc" id="L411">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L412">        plot2.setDomainCrosshairPaint(new GradientPaint(1.0f, 2.0f, Color.RED,</span>
                3.0f, 4.0f, Color.BLUE));
<span class="fc" id="L414">        assertEquals(plot1, plot2);</span>

        // domainCrosshairStroke
<span class="fc" id="L417">        plot1.setDomainCrosshairStroke(new BasicStroke(1.23f));</span>
<span class="fc" id="L418">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L419">        plot2.setDomainCrosshairStroke(new BasicStroke(1.23f));</span>
<span class="fc" id="L420">        assertEquals(plot1, plot2);</span>

<span class="fc" id="L422">        plot1.setRangeMinorGridlinesVisible(true);</span>
<span class="fc" id="L423">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L424">        plot2.setRangeMinorGridlinesVisible(true);</span>
<span class="fc" id="L425">        assertEquals(plot1, plot2);</span>

<span class="fc" id="L427">        plot1.setRangeMinorGridlinePaint(new GradientPaint(1.0f, 2.0f,</span>
                Color.RED, 3.0f, 4.0f, Color.BLUE));
<span class="fc" id="L429">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L430">        plot2.setRangeMinorGridlinePaint(new GradientPaint(1.0f, 2.0f, Color.RED,</span>
                3.0f, 4.0f, Color.BLUE));
<span class="fc" id="L432">        assertEquals(plot1, plot2);</span>

<span class="fc" id="L434">        plot1.setRangeMinorGridlineStroke(new BasicStroke(1.23f));</span>
<span class="fc" id="L435">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L436">        plot2.setRangeMinorGridlineStroke(new BasicStroke(1.23f));</span>
<span class="fc" id="L437">        assertEquals(plot1, plot2);</span>

<span class="pc bpc" id="L439" title="1 of 2 branches missed.">        plot1.setRangeZeroBaselineVisible(!plot1.isRangeZeroBaselineVisible());</span>
<span class="fc" id="L440">        assertNotEquals(plot1, plot2);</span>
<span class="pc bpc" id="L441" title="1 of 2 branches missed.">        plot2.setRangeZeroBaselineVisible(!plot2.isRangeZeroBaselineVisible());</span>
<span class="fc" id="L442">        assertEquals(plot1, plot2);</span>

<span class="fc" id="L444">        plot1.setRangeZeroBaselinePaint(new GradientPaint(1.0f, 2.0f,</span>
                Color.RED, 3.0f, 4.0f, Color.BLUE));
<span class="fc" id="L446">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L447">        plot2.setRangeZeroBaselinePaint(new GradientPaint(1.0f, 2.0f, Color.RED,</span>
                3.0f, 4.0f, Color.BLUE));
<span class="fc" id="L449">        assertEquals(plot1, plot2);</span>

<span class="fc" id="L451">        plot1.setRangeZeroBaselineStroke(new BasicStroke(1.23f));</span>
<span class="fc" id="L452">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L453">        plot2.setRangeZeroBaselineStroke(new BasicStroke(1.23f));</span>
<span class="fc" id="L454">        assertEquals(plot1, plot2);</span>

        // shadowGenerator
<span class="fc" id="L457">        plot1.setShadowGenerator(new DefaultShadowGenerator(5, Color.GRAY,</span>
                0.6f, 4, -Math.PI / 4));
<span class="fc" id="L459">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L460">        plot2.setShadowGenerator(new DefaultShadowGenerator(5, Color.GRAY,</span>
                0.6f, 4, -Math.PI / 4));
<span class="fc" id="L462">        assertEquals(plot1, plot2);</span>

<span class="fc" id="L464">        plot1.setShadowGenerator(null);</span>
<span class="fc" id="L465">        assertNotEquals(plot1, plot2);</span>
<span class="fc" id="L466">        plot2.setShadowGenerator(null);</span>
<span class="fc" id="L467">        assertEquals(plot1, plot2);</span>
<span class="fc" id="L468">    }</span>

    /**
     * This test covers a flaw in the ObjectList equals() method.
     */
    @Test
    public void testEquals_ObjectList() {
<span class="fc" id="L475">        CategoryPlot&lt;String, String&gt; p1 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L476">        p1.setDomainAxis(new CategoryAxis(&quot;A&quot;));</span>
<span class="fc" id="L477">        CategoryPlot&lt;String, String&gt; p2 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L478">        p2.setDomainAxis(new CategoryAxis(&quot;A&quot;));</span>
<span class="fc" id="L479">        assertEquals(p1, p2);</span>
<span class="fc" id="L480">        p2.setDomainAxis(1, new CategoryAxis(&quot;B&quot;));</span>
<span class="fc" id="L481">        assertNotEquals(p1, p2);</span>
<span class="fc" id="L482">    }</span>
    
    /**
     * This test covers a flaw in the ObjectList equals() method.
     */
    @Test
    public void testEquals_ObjectList2() {
<span class="fc" id="L489">        CategoryPlot&lt;String, String&gt; p1 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L490">        p1.setDomainAxisLocation(AxisLocation.BOTTOM_OR_RIGHT);</span>
<span class="fc" id="L491">        CategoryPlot&lt;String, String&gt; p2 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L492">        p2.setDomainAxisLocation(AxisLocation.BOTTOM_OR_RIGHT);</span>
<span class="fc" id="L493">        assertEquals(p1, p2);</span>
<span class="fc" id="L494">        p2.setDomainAxisLocation(1, AxisLocation.TOP_OR_LEFT);</span>
<span class="fc" id="L495">        assertNotEquals(p1, p2);</span>
<span class="fc" id="L496">    }</span>

    /**
     * This test covers a flaw in the ObjectList equals() method.
     */
    @Test
    public void testEquals_ObjectList3() {
<span class="fc" id="L503">        CategoryPlot&lt;String, String&gt; p1 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L504">        p1.setRangeAxis(new NumberAxis(&quot;A&quot;));</span>
<span class="fc" id="L505">        CategoryPlot&lt;String, String&gt; p2 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L506">        p2.setRangeAxis(new NumberAxis(&quot;A&quot;));</span>
<span class="fc" id="L507">        assertEquals(p1, p2);</span>
<span class="fc" id="L508">        p2.setRangeAxis(1, new NumberAxis(&quot;B&quot;));</span>
<span class="fc" id="L509">        assertNotEquals(p1, p2);</span>
<span class="fc" id="L510">    }</span>
    
    /**
     * This test covers a flaw in the ObjectList equals() method.
     */
    @Test
    public void testEquals_ObjectList4() {
<span class="fc" id="L517">        CategoryPlot&lt;String, String&gt; p1 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L518">        p1.setRangeAxisLocation(AxisLocation.BOTTOM_OR_RIGHT);</span>
<span class="fc" id="L519">        CategoryPlot&lt;String, String&gt; p2 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L520">        p2.setRangeAxisLocation(AxisLocation.BOTTOM_OR_RIGHT);</span>
<span class="fc" id="L521">        assertEquals(p1, p2);</span>
<span class="fc" id="L522">        p2.setRangeAxisLocation(1, AxisLocation.TOP_OR_LEFT);</span>
<span class="fc" id="L523">        assertNotEquals(p1, p2);</span>
<span class="fc" id="L524">    }</span>

    /**
     * This test covers a flaw in the ObjectList equals() method.
     */
    @Test
    public void testEquals_ObjectList5() {
<span class="fc" id="L531">        CategoryPlot&lt;String, String&gt; p1 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L532">        p1.setRenderer(new BarRenderer());</span>
<span class="fc" id="L533">        CategoryPlot&lt;String, String&gt; p2 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L534">        p2.setRenderer(new BarRenderer());</span>
<span class="fc" id="L535">        assertEquals(p1, p2);</span>
<span class="fc" id="L536">        p2.setRenderer(1, new LineAndShapeRenderer());</span>
<span class="fc" id="L537">        assertNotEquals(p1, p2);</span>
<span class="fc" id="L538">    }</span>

    /**
     * Confirm that cloning works.
     */
    @Test
    public void testCloning() {
<span class="fc" id="L545">        CategoryPlot&lt;String, String&gt; p1 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L546">        p1.setRangeCrosshairPaint(new GradientPaint(1.0f, 2.0f, Color.WHITE,</span>
                3.0f, 4.0f, Color.YELLOW));
<span class="fc" id="L548">        p1.setRangeMinorGridlinePaint(new GradientPaint(2.0f, 3.0f, Color.WHITE,</span>
                4.0f, 5.0f, Color.RED));
<span class="fc" id="L550">        p1.setRangeZeroBaselinePaint(new GradientPaint(3.0f, 4.0f, Color.RED,</span>
                5.0f, 6.0f, Color.WHITE));
        CategoryPlot&lt;String, String&gt; p2;
        try {
<span class="fc" id="L554">            p2 = CloneUtils.clone(p1);</span>
        }
<span class="nc" id="L556">        catch (CloneNotSupportedException e) {</span>
<span class="nc" id="L557">            fail(&quot;Cloning failed.&quot;);</span>
<span class="nc" id="L558">            return;</span>
<span class="fc" id="L559">        }</span>
<span class="fc" id="L560">        assertNotSame(p1, p2);</span>
<span class="fc" id="L561">        assertSame(p1.getClass(), p2.getClass());</span>
<span class="fc" id="L562">        assertEquals(p1, p2);</span>

        // check independence
<span class="fc" id="L565">        p1.addAnnotation(new CategoryLineAnnotation(&quot;C1&quot;, 1.0, &quot;C2&quot;, 2.0,</span>
                Color.RED, new BasicStroke(1.0f)));
<span class="fc" id="L567">        assertNotEquals(p1, p2);</span>
<span class="fc" id="L568">        p2.addAnnotation(new CategoryLineAnnotation(&quot;C1&quot;, 1.0, &quot;C2&quot;, 2.0,</span>
                Color.RED, new BasicStroke(1.0f)));
<span class="fc" id="L570">        assertEquals(p1, p2);</span>

<span class="fc" id="L572">        p1.addDomainMarker(new CategoryMarker(&quot;C1&quot;), Layer.FOREGROUND);</span>
<span class="fc" id="L573">        assertNotEquals(p1, p2);</span>
<span class="fc" id="L574">        p2.addDomainMarker(new CategoryMarker(&quot;C1&quot;), Layer.FOREGROUND);</span>
<span class="fc" id="L575">        assertEquals(p1, p2);</span>

<span class="fc" id="L577">        p1.addDomainMarker(new CategoryMarker(&quot;C2&quot;), Layer.BACKGROUND);</span>
<span class="fc" id="L578">        assertNotEquals(p1, p2);</span>
<span class="fc" id="L579">        p2.addDomainMarker(new CategoryMarker(&quot;C2&quot;), Layer.BACKGROUND);</span>
<span class="fc" id="L580">        assertEquals(p1, p2);</span>

<span class="fc" id="L582">        p1.addRangeMarker(new ValueMarker(1.0), Layer.FOREGROUND);</span>
<span class="fc" id="L583">        assertNotEquals(p1, p2);</span>
<span class="fc" id="L584">        p2.addRangeMarker(new ValueMarker(1.0), Layer.FOREGROUND);</span>
<span class="fc" id="L585">        assertEquals(p1, p2);</span>

<span class="fc" id="L587">        p1.addRangeMarker(new ValueMarker(2.0), Layer.BACKGROUND);</span>
<span class="fc" id="L588">        assertNotEquals(p1, p2);</span>
<span class="fc" id="L589">        p2.addRangeMarker(new ValueMarker(2.0), Layer.BACKGROUND);</span>
<span class="fc" id="L590">        assertEquals(p1, p2);</span>
<span class="fc" id="L591">    }</span>

    /**
     * Some more cloning checks.
     */
    @Test
    public void testCloning2() {
<span class="fc" id="L598">        AxisSpace da1 = new AxisSpace();</span>
<span class="fc" id="L599">        AxisSpace ra1 = new AxisSpace();</span>
<span class="fc" id="L600">        CategoryPlot&lt;String, String&gt; p1 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L601">        p1.setFixedDomainAxisSpace(da1);</span>
<span class="fc" id="L602">        p1.setFixedRangeAxisSpace(ra1);</span>
        CategoryPlot&lt;String, String&gt; p2;
        try {
<span class="fc" id="L605">            p2 = CloneUtils.clone(p1);</span>
        }
<span class="nc" id="L607">        catch (CloneNotSupportedException e) {</span>
<span class="nc" id="L608">            fail(&quot;Cloning failed.&quot;);</span>
<span class="nc" id="L609">            return;</span>
<span class="fc" id="L610">        }</span>
<span class="fc" id="L611">        assertNotSame(p1, p2);</span>
<span class="fc" id="L612">        assertSame(p1.getClass(), p2.getClass());</span>
<span class="fc" id="L613">        assertEquals(p1, p2);</span>

<span class="fc" id="L615">        da1.setBottom(99.0);</span>
<span class="fc" id="L616">        assertNotEquals(p1, p2);</span>
<span class="fc" id="L617">        p2.getFixedDomainAxisSpace().setBottom(99.0);</span>
<span class="fc" id="L618">        assertEquals(p1, p2);</span>

<span class="fc" id="L620">        ra1.setBottom(11.0);</span>
<span class="fc" id="L621">        assertNotEquals(p1, p2);</span>
<span class="fc" id="L622">        p2.getFixedRangeAxisSpace().setBottom(11.0);</span>
<span class="fc" id="L623">        assertEquals(p1, p2);</span>
<span class="fc" id="L624">    }</span>

    /**
     * Some more cloning checks.
     */
    @Test
    public void testCloning3() {
<span class="fc" id="L631">        LegendItemCollection c1 = new LegendItemCollection();</span>
<span class="fc" id="L632">        CategoryPlot&lt;String, String&gt; p1 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L633">        p1.setFixedLegendItems(c1);</span>
        CategoryPlot&lt;String, String&gt; p2;
        try {
<span class="fc" id="L636">            p2 = CloneUtils.clone(p1);</span>
        }
<span class="nc" id="L638">        catch (CloneNotSupportedException e) {</span>
<span class="nc" id="L639">            fail(&quot;Cloning failed.&quot;);</span>
<span class="nc" id="L640">            return;</span>
<span class="fc" id="L641">        }</span>
<span class="fc" id="L642">        assertNotSame(p1, p2);</span>
<span class="fc" id="L643">        assertSame(p1.getClass(), p2.getClass());</span>
<span class="fc" id="L644">        assertEquals(p1, p2);</span>

<span class="fc" id="L646">        c1.add(new LegendItem(&quot;X&quot;, &quot;XX&quot;, &quot;tt&quot;, &quot;url&quot;, true,</span>
                new Rectangle2D.Double(1.0, 2.0, 3.0, 4.0), true, Color.RED,
                true, Color.YELLOW, new BasicStroke(1.0f), true,
                new Line2D.Double(1.0, 2.0, 3.0, 4.0), new BasicStroke(1.0f),
                Color.GREEN));
<span class="fc" id="L651">        assertNotEquals(p1, p2);</span>
<span class="fc" id="L652">        p2.getFixedLegendItems().add(new LegendItem(&quot;X&quot;, &quot;XX&quot;, &quot;tt&quot;, &quot;url&quot;,</span>
                true, new Rectangle2D.Double(1.0, 2.0, 3.0, 4.0), true,
                Color.RED, true, Color.YELLOW, new BasicStroke(1.0f), true,
                new Line2D.Double(1.0, 2.0, 3.0, 4.0), new BasicStroke(1.0f),
                Color.GREEN));
<span class="fc" id="L657">        assertEquals(p1, p2);</span>
<span class="fc" id="L658">    }</span>

    /**
     * Renderers that belong to the plot are being cloned but they are
     * retaining a reference to the original plot.
     */
    @Test
    public void testBug2817504() {
<span class="fc" id="L666">        CategoryPlot&lt;String, String&gt; p1 = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L667">        LineAndShapeRenderer r1 = new LineAndShapeRenderer();</span>
<span class="fc" id="L668">        p1.setRenderer(r1);</span>
        CategoryPlot&lt;String, String&gt; p2;
        try {
<span class="fc" id="L671">            p2 = CloneUtils.clone(p1);</span>
        }
<span class="nc" id="L673">        catch (CloneNotSupportedException e) {</span>
<span class="nc" id="L674">            fail(&quot;Cloning failed.&quot;);</span>
<span class="nc" id="L675">            return;</span>
<span class="fc" id="L676">        }</span>
<span class="fc" id="L677">        assertNotSame(p1, p2);</span>
<span class="fc" id="L678">        assertSame(p1.getClass(), p2.getClass());</span>
<span class="fc" id="L679">        assertEquals(p1, p2);</span>

        // check for independence
<span class="fc" id="L682">        LineAndShapeRenderer r2 = (LineAndShapeRenderer) p2.getRenderer();</span>
<span class="fc" id="L683">        assertSame(r2.getPlot(), p2);</span>
<span class="fc" id="L684">    }</span>

    /**
     * Serialize an instance, restore it, and check for equality.
     */
    @Test
    public void testSerialization() {
<span class="fc" id="L691">        DefaultCategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L692">        CategoryAxis domainAxis = new CategoryAxis(&quot;Domain&quot;);</span>
<span class="fc" id="L693">        NumberAxis rangeAxis = new NumberAxis(&quot;Range&quot;);</span>
<span class="fc" id="L694">        BarRenderer renderer = new BarRenderer();</span>
<span class="fc" id="L695">        CategoryPlot&lt;String, String&gt; p1 = new CategoryPlot&lt;&gt;(dataset, domainAxis, </span>
                rangeAxis, renderer);
<span class="fc" id="L697">        p1.setOrientation(PlotOrientation.HORIZONTAL);</span>
<span class="fc" id="L698">        CategoryPlot&lt;String, String&gt; p2 = TestUtils.serialised(p1);</span>
<span class="fc" id="L699">        assertEquals(p1, p2);</span>
<span class="fc" id="L700">    }</span>

    /**
     * Serialize an instance, restore it, and check for equality.
     */
    @Test
    public void testSerialization2() {
<span class="fc" id="L707">        DefaultCategoryDataset&lt;String, String&gt; data = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L708">        CategoryAxis domainAxis = new CategoryAxis(&quot;Domain&quot;);</span>
<span class="fc" id="L709">        NumberAxis rangeAxis = new NumberAxis(&quot;Range&quot;);</span>
<span class="fc" id="L710">        BarRenderer renderer = new BarRenderer();</span>
<span class="fc" id="L711">        CategoryPlot&lt;String, String&gt; p1 = new CategoryPlot&lt;&gt;(data, domainAxis, </span>
                rangeAxis, renderer);
<span class="fc" id="L713">        p1.setOrientation(PlotOrientation.VERTICAL);</span>
<span class="fc" id="L714">        CategoryPlot&lt;String, String&gt; p2 = TestUtils.serialised(p1);</span>
<span class="fc" id="L715">        assertEquals(p1, p2);</span>
<span class="fc" id="L716">    }</span>

    /**
     * Serialize an instance, restore it, and check for equality.
     */
    @Test
    public void testSerialization3() {
<span class="fc" id="L723">        DefaultCategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L724">        JFreeChart chart = ChartFactory.createBarChart(</span>
                &quot;Test Chart&quot;, &quot;Category Axis&quot;, &quot;Value Axis&quot;, dataset,
                PlotOrientation.VERTICAL, true, true, false);
<span class="fc" id="L727">        JFreeChart chart2 = TestUtils.serialised(chart);</span>

        // now check that the chart is usable...
        try {
<span class="fc" id="L731">            chart2.createBufferedImage(300, 200);</span>
        }
<span class="nc" id="L733">        catch (Exception e) {</span>
<span class="nc" id="L734">            fail(&quot;No exception should be thrown.&quot;);</span>
<span class="fc" id="L735">        }</span>
<span class="fc" id="L736">    }</span>

    /**
     * This test ensures that a plot with markers is serialized correctly.
     */
    @Test
    public void testSerialization4() {
<span class="fc" id="L743">        DefaultCategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L744">        JFreeChart chart = ChartFactory.createBarChart(</span>
                &quot;Test Chart&quot;, &quot;Category Axis&quot;, &quot;Value Axis&quot;,
                dataset, PlotOrientation.VERTICAL, true, true, false);
        @SuppressWarnings(&quot;unchecked&quot;)
<span class="fc" id="L748">        CategoryPlot&lt;String, String&gt; plot = (CategoryPlot) chart.getPlot();</span>
<span class="fc" id="L749">        plot.addRangeMarker(new ValueMarker(1.1), Layer.FOREGROUND);</span>
<span class="fc" id="L750">        plot.addRangeMarker(new IntervalMarker(2.2, 3.3), Layer.BACKGROUND);</span>
<span class="fc" id="L751">        JFreeChart chart2 = TestUtils.serialised(chart);</span>
<span class="fc" id="L752">        assertEquals(chart, chart2);</span>

        // now check that the chart is usable...
        try {
<span class="fc" id="L756">            chart2.createBufferedImage(300, 200);</span>
        }
<span class="nc" id="L758">        catch (Exception e) {</span>
<span class="nc" id="L759">            fail(&quot;No exception should be thrown.&quot;);</span>
<span class="fc" id="L760">        }</span>
<span class="fc" id="L761">    }</span>

    /**
     * Tests a bug where the plot is no longer registered as a listener
     * with the dataset(s) and axes after deserialization.  See patch 1209475
     * at SourceForge.
     */
    @Test
    public void testSerialization5() {
<span class="fc" id="L770">        DefaultCategoryDataset&lt;String, String&gt; dataset1 = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L771">        CategoryAxis domainAxis1 = new CategoryAxis(&quot;Domain 1&quot;);</span>
<span class="fc" id="L772">        NumberAxis rangeAxis1 = new NumberAxis(&quot;Range 1&quot;);</span>
<span class="fc" id="L773">        BarRenderer renderer1 = new BarRenderer();</span>
<span class="fc" id="L774">        CategoryPlot&lt;String, String&gt; p1 = new CategoryPlot&lt;&gt;(dataset1, </span>
                domainAxis1, rangeAxis1, renderer1);
<span class="fc" id="L776">        CategoryAxis domainAxis2 = new CategoryAxis(&quot;Domain 2&quot;);</span>
<span class="fc" id="L777">        NumberAxis rangeAxis2 = new NumberAxis(&quot;Range 2&quot;);</span>
<span class="fc" id="L778">        BarRenderer renderer2 = new BarRenderer();</span>
<span class="fc" id="L779">        DefaultCategoryDataset&lt;String, String&gt; dataset2 = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L780">        p1.setDataset(1, dataset2);</span>
<span class="fc" id="L781">        p1.setDomainAxis(1, domainAxis2);</span>
<span class="fc" id="L782">        p1.setRangeAxis(1, rangeAxis2);</span>
<span class="fc" id="L783">        p1.setRenderer(1, renderer2);</span>
<span class="fc" id="L784">        CategoryPlot&lt;String, String&gt; p2 = TestUtils.serialised(p1);</span>
<span class="fc" id="L785">        assertEquals(p1, p2);</span>

        // now check that all datasets, renderers and axes are being listened
        // too...
<span class="fc" id="L789">        CategoryAxis domainAxisA = p2.getDomainAxis(0);</span>
<span class="fc" id="L790">        NumberAxis rangeAxisA = (NumberAxis) p2.getRangeAxis(0);</span>
        @SuppressWarnings(&quot;unchecked&quot;)
<span class="fc" id="L792">        DefaultCategoryDataset&lt;String, String&gt; datasetA </span>
<span class="fc" id="L793">                = (DefaultCategoryDataset) p2.getDataset(0);</span>
<span class="fc" id="L794">        BarRenderer rendererA = (BarRenderer) p2.getRenderer(0);</span>
<span class="fc" id="L795">        CategoryAxis domainAxisB = p2.getDomainAxis(1);</span>
<span class="fc" id="L796">        NumberAxis rangeAxisB = (NumberAxis) p2.getRangeAxis(1);</span>
        @SuppressWarnings(&quot;unchecked&quot;)
<span class="fc" id="L798">        DefaultCategoryDataset&lt;String, String&gt; datasetB</span>
<span class="fc" id="L799">                = (DefaultCategoryDataset) p2.getDataset(1);</span>
<span class="fc" id="L800">        BarRenderer rendererB  = (BarRenderer) p2.getRenderer(1);</span>
<span class="fc" id="L801">        assertTrue(datasetA.hasListener(p2));</span>
<span class="fc" id="L802">        assertTrue(domainAxisA.hasListener(p2));</span>
<span class="fc" id="L803">        assertTrue(rangeAxisA.hasListener(p2));</span>
<span class="fc" id="L804">        assertTrue(rendererA.hasListener(p2));</span>
<span class="fc" id="L805">        assertTrue(datasetB.hasListener(p2));</span>
<span class="fc" id="L806">        assertTrue(domainAxisB.hasListener(p2));</span>
<span class="fc" id="L807">        assertTrue(rangeAxisB.hasListener(p2));</span>
<span class="fc" id="L808">        assertTrue(rendererB.hasListener(p2));</span>
<span class="fc" id="L809">    }</span>

    /**
     * A test for a bug where setting the renderer doesn't register the plot
     * as a RendererChangeListener.
     */
    @Test
    public void testSetRenderer() {
<span class="fc" id="L817">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L818">        CategoryItemRenderer renderer = new LineAndShapeRenderer();</span>
<span class="fc" id="L819">        plot.setRenderer(renderer);</span>
        // now make a change to the renderer and see if it triggers a plot
        // change event...
<span class="fc" id="L822">        MyPlotChangeListener listener = new MyPlotChangeListener();</span>
<span class="fc" id="L823">        plot.addChangeListener(listener);</span>
<span class="fc" id="L824">        renderer.setSeriesPaint(0, Color.BLACK);</span>
<span class="fc" id="L825">        assertNotNull(listener.getEvent());</span>
<span class="fc" id="L826">    }</span>

    /**
     * A test for bug report 1169972.
     */
    @Test
    public void test1169972() {
<span class="fc" id="L833">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(null, null, null, null);</span>
<span class="fc" id="L834">        plot.setDomainAxis(new CategoryAxis(&quot;C&quot;));</span>
<span class="fc" id="L835">        plot.setRangeAxis(new NumberAxis(&quot;Y&quot;));</span>
<span class="fc" id="L836">        plot.setRenderer(new BarRenderer());</span>
<span class="fc" id="L837">        plot.setDataset(new DefaultCategoryDataset&lt;&gt;());</span>
<span class="fc" id="L838">        assertTrue(true); // we didn't get an exception so all is good</span>
<span class="fc" id="L839">    }</span>

    /**
     * Some tests for the addDomainMarker() method(s).
     */
    @Test
    public void testAddDomainMarker() {
<span class="fc" id="L846">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L847">        CategoryMarker m = new CategoryMarker(&quot;C1&quot;);</span>
<span class="fc" id="L848">        plot.addDomainMarker(m);</span>
<span class="fc" id="L849">        List&lt;EventListener&gt; listeners = Arrays.asList(m.getListeners(</span>
                MarkerChangeListener.class));
<span class="fc" id="L851">        assertTrue(listeners.contains(plot));</span>
<span class="fc" id="L852">        plot.clearDomainMarkers();</span>
<span class="fc" id="L853">        listeners = Arrays.asList(m.getListeners(MarkerChangeListener.class));</span>
<span class="fc" id="L854">        assertFalse(listeners.contains(plot));</span>
<span class="fc" id="L855">    }</span>

    /**
     * Some tests for the addRangeMarker() method(s).
     */
    @Test
    public void testAddRangeMarker() {
<span class="fc" id="L862">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L863">        Marker m = new ValueMarker(1.0);</span>
<span class="fc" id="L864">        plot.addRangeMarker(m);</span>
<span class="fc" id="L865">        List&lt;EventListener&gt; listeners = Arrays.asList(m.getListeners(</span>
                MarkerChangeListener.class));
<span class="fc" id="L867">        assertTrue(listeners.contains(plot));</span>
<span class="fc" id="L868">        plot.clearRangeMarkers();</span>
<span class="fc" id="L869">        listeners = Arrays.asList(m.getListeners(MarkerChangeListener.class));</span>
<span class="fc" id="L870">        assertFalse(listeners.contains(plot));</span>
<span class="fc" id="L871">    }</span>

    /**
     * A test for bug 1654215 (where a renderer is added to the plot without
     * a corresponding dataset and it throws an exception at drawing time).
     */
    @Test
    public void test1654215() {
<span class="fc" id="L879">        DefaultCategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L880">        JFreeChart chart = ChartFactory.createLineChart(&quot;Title&quot;, &quot;X&quot;, &quot;Y&quot;,</span>
                dataset, PlotOrientation.VERTICAL, true, false, false);
        @SuppressWarnings(&quot;unchecked&quot;)
<span class="fc" id="L883">        CategoryPlot&lt;String, String&gt; plot = (CategoryPlot) chart.getPlot();</span>
<span class="fc" id="L884">        plot.setRenderer(1, new LineAndShapeRenderer());</span>
        try {
<span class="fc" id="L886">            BufferedImage image = new BufferedImage(200 , 100,</span>
                    BufferedImage.TYPE_INT_RGB);
<span class="fc" id="L888">            Graphics2D g2 = image.createGraphics();</span>
<span class="fc" id="L889">            chart.draw(g2, new Rectangle2D.Double(0, 0, 200, 100), null, null);</span>
<span class="fc" id="L890">            g2.dispose();</span>
        }
<span class="nc" id="L892">        catch (Exception e) {</span>
<span class="nc" id="L893">            fail(&quot;No exception should be thrown.&quot;);</span>
<span class="fc" id="L894">        }</span>
<span class="fc" id="L895">    }</span>

    /**
     * Some checks for the getDomainAxisIndex() method.
     */
    @Test
    public void testGetDomainAxisIndex() {
<span class="fc" id="L902">        CategoryAxis domainAxis1 = new CategoryAxis(&quot;X1&quot;);</span>
<span class="fc" id="L903">        CategoryAxis domainAxis2 = new CategoryAxis(&quot;X2&quot;);</span>
<span class="fc" id="L904">        NumberAxis rangeAxis1 = new NumberAxis(&quot;Y1&quot;);</span>
<span class="fc" id="L905">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(null, domainAxis1, </span>
                rangeAxis1, null);
<span class="fc" id="L907">        assertEquals(0, plot.getDomainAxisIndex(domainAxis1));</span>
<span class="fc" id="L908">        assertEquals(-1, plot.getDomainAxisIndex(domainAxis2));</span>
<span class="fc" id="L909">        plot.setDomainAxis(1, domainAxis2);</span>
<span class="fc" id="L910">        assertEquals(1, plot.getDomainAxisIndex(domainAxis2));</span>
<span class="fc" id="L911">        assertEquals(-1, plot.getDomainAxisIndex(new CategoryAxis(&quot;X2&quot;)));</span>
<span class="fc" id="L912">        boolean pass = false;</span>
        try {
<span class="nc" id="L914">            plot.getDomainAxisIndex(null);</span>
        }
<span class="fc" id="L916">        catch (IllegalArgumentException e) {</span>
<span class="fc" id="L917">            pass = true;</span>
<span class="nc" id="L918">        }</span>
<span class="fc" id="L919">        assertTrue(pass);</span>
<span class="fc" id="L920">    }</span>

    /**
     * Some checks for the getRangeAxisIndex() method.
     */
    @Test
    public void testGetRangeAxisIndex() {
<span class="fc" id="L927">        CategoryAxis domainAxis1 = new CategoryAxis(&quot;X1&quot;);</span>
<span class="fc" id="L928">        NumberAxis rangeAxis1 = new NumberAxis(&quot;Y1&quot;);</span>
<span class="fc" id="L929">        NumberAxis rangeAxis2 = new NumberAxis(&quot;Y2&quot;);</span>
<span class="fc" id="L930">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(null, domainAxis1, </span>
                rangeAxis1, null);
<span class="fc" id="L932">        assertEquals(0, plot.getRangeAxisIndex(rangeAxis1));</span>
<span class="fc" id="L933">        assertEquals(-1, plot.getRangeAxisIndex(rangeAxis2));</span>
<span class="fc" id="L934">        plot.setRangeAxis(1, rangeAxis2);</span>
<span class="fc" id="L935">        assertEquals(1, plot.getRangeAxisIndex(rangeAxis2));</span>
<span class="fc" id="L936">        assertEquals(-1, plot.getRangeAxisIndex(new NumberAxis(&quot;Y2&quot;)));</span>
<span class="fc" id="L937">        boolean pass = false;</span>
        try {
<span class="nc" id="L939">            plot.getRangeAxisIndex(null);</span>
        }
<span class="fc" id="L941">        catch (IllegalArgumentException e) {</span>
<span class="fc" id="L942">            pass = true;</span>
<span class="nc" id="L943">        }</span>
<span class="fc" id="L944">        assertTrue(pass);</span>
<span class="fc" id="L945">    }</span>

    /**
     * Check that removing a marker that isn't assigned to the plot returns
     * false.
     */
    @Test
    public void testRemoveDomainMarker() {
<span class="fc" id="L953">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L954">        assertFalse(plot.removeDomainMarker(new CategoryMarker(&quot;Category 1&quot;)));</span>
<span class="fc" id="L955">    }</span>

    /**
     * Check that removing a marker that isn't assigned to the plot returns
     * false.
     */
    @Test
    public void testRemoveRangeMarker() {
<span class="fc" id="L963">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;();</span>
<span class="fc" id="L964">        assertFalse(plot.removeRangeMarker(new ValueMarker(0.5)));</span>
<span class="fc" id="L965">    }</span>

    /**
     * Some tests for the getDomainAxisForDataset() method.
     */
    @Test
    public void testGetDomainAxisForDataset() {
<span class="fc" id="L972">        CategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L973">        CategoryAxis xAxis = new CategoryAxis(&quot;X&quot;);</span>
<span class="fc" id="L974">        NumberAxis yAxis = new NumberAxis(&quot;Y&quot;);</span>
<span class="fc" id="L975">        CategoryItemRenderer renderer = new BarRenderer();</span>
<span class="fc" id="L976">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(dataset, xAxis, </span>
                yAxis, renderer);
<span class="fc" id="L978">        assertEquals(xAxis, plot.getDomainAxisForDataset(0));</span>

        // should get IllegalArgumentException for negative index
<span class="fc" id="L981">        boolean pass = false;</span>
        try {
<span class="nc" id="L983">            plot.getDomainAxisForDataset(-1);</span>
        }
<span class="fc" id="L985">        catch (IllegalArgumentException e) {</span>
<span class="fc" id="L986">            pass = true;</span>
<span class="nc" id="L987">        }</span>
<span class="fc" id="L988">        assertTrue(pass);</span>

        // if multiple axes are mapped, the first in the list should be
        // returned...
<span class="fc" id="L992">        CategoryAxis xAxis2 = new CategoryAxis(&quot;X2&quot;);</span>
<span class="fc" id="L993">        plot.setDomainAxis(1, xAxis2);</span>
<span class="fc" id="L994">        assertEquals(xAxis, plot.getDomainAxisForDataset(0));</span>

<span class="fc" id="L996">        plot.mapDatasetToDomainAxis(0, 1);</span>
<span class="fc" id="L997">        assertEquals(xAxis2, plot.getDomainAxisForDataset(0));</span>

<span class="fc" id="L999">        List&lt;Integer&gt; axisIndices = Arrays.asList(new Integer[] {0, 1});</span>
<span class="fc" id="L1000">        plot.mapDatasetToDomainAxes(0, axisIndices);</span>
<span class="fc" id="L1001">        assertEquals(xAxis, plot.getDomainAxisForDataset(0));</span>

<span class="fc" id="L1003">        axisIndices = Arrays.asList(new Integer[] {1, 2});</span>
<span class="fc" id="L1004">        plot.mapDatasetToDomainAxes(0, axisIndices);</span>
<span class="fc" id="L1005">        assertEquals(xAxis2, plot.getDomainAxisForDataset(0));</span>
<span class="fc" id="L1006">    }</span>

    /**
     * Some tests for the getRangeAxisForDataset() method.
     */
    @Test
    public void testGetRangeAxisForDataset() {
<span class="fc" id="L1013">        CategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1014">        CategoryAxis xAxis = new CategoryAxis(&quot;X&quot;);</span>
<span class="fc" id="L1015">        NumberAxis yAxis = new NumberAxis(&quot;Y&quot;);</span>
<span class="fc" id="L1016">        CategoryItemRenderer renderer = new DefaultCategoryItemRenderer();</span>
<span class="fc" id="L1017">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(dataset, xAxis, </span>
                yAxis, renderer);
<span class="fc" id="L1019">        assertEquals(yAxis, plot.getRangeAxisForDataset(0));</span>

        // should get IllegalArgumentException for negative index
<span class="fc" id="L1022">        boolean pass = false;</span>
        try {
<span class="nc" id="L1024">            plot.getRangeAxisForDataset(-1);</span>
        }
<span class="fc" id="L1026">        catch (IllegalArgumentException e) {</span>
<span class="fc" id="L1027">            pass = true;</span>
<span class="nc" id="L1028">        }</span>
<span class="fc" id="L1029">        assertTrue(pass);</span>

        // if multiple axes are mapped, the first in the list should be
        // returned...
<span class="fc" id="L1033">        NumberAxis yAxis2 = new NumberAxis(&quot;Y2&quot;);</span>
<span class="fc" id="L1034">        plot.setRangeAxis(1, yAxis2);</span>
<span class="fc" id="L1035">        assertEquals(yAxis, plot.getRangeAxisForDataset(0));</span>

<span class="fc" id="L1037">        plot.mapDatasetToRangeAxis(0, 1);</span>
<span class="fc" id="L1038">        assertEquals(yAxis2, plot.getRangeAxisForDataset(0));</span>

<span class="fc" id="L1040">        List&lt;Integer&gt; axisIndices = Arrays.asList(new Integer[] {0, 1});</span>
<span class="fc" id="L1041">        plot.mapDatasetToRangeAxes(0, axisIndices);</span>
<span class="fc" id="L1042">        assertEquals(yAxis, plot.getRangeAxisForDataset(0));</span>

<span class="fc" id="L1044">        axisIndices = Arrays.asList(new Integer[] {1, 2});</span>
<span class="fc" id="L1045">        plot.mapDatasetToRangeAxes(0, axisIndices);</span>
<span class="fc" id="L1046">        assertEquals(yAxis2, plot.getRangeAxisForDataset(0));</span>
<span class="fc" id="L1047">    }</span>
    
    /**
     * Datasets are now stored in a Map, and it should be possible to assign
     * them an arbitrary key (index).
     */
    @Test
    public void testDatasetIndices() {
<span class="fc" id="L1055">        CategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1056">        CategoryAxis xAxis = new CategoryAxis(&quot;X&quot;);</span>
<span class="fc" id="L1057">        NumberAxis yAxis = new NumberAxis(&quot;Y&quot;);</span>
<span class="fc" id="L1058">        CategoryItemRenderer renderer = new BarRenderer();</span>
<span class="fc" id="L1059">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(dataset, xAxis, </span>
                yAxis, renderer);
        
<span class="fc" id="L1062">        assertEquals(dataset, plot.getDataset(0));</span>
        
<span class="fc" id="L1064">        DefaultCategoryDataset&lt;String,String&gt; dataset2 = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1065">        dataset2.setValue(1, &quot;R1&quot;, &quot;C1&quot;);</span>
        
        // we should be able to give a dataset an arbitrary index
<span class="fc" id="L1068">        plot.setDataset(99, dataset2);</span>
<span class="fc" id="L1069">        assertEquals(2, plot.getDatasetCount());</span>
<span class="fc" id="L1070">        assertEquals(dataset2, plot.getDataset(99));</span>
        
<span class="fc" id="L1072">        assertEquals(0, plot.indexOf(dataset));</span>
<span class="fc" id="L1073">        assertEquals(99, plot.indexOf(dataset2));</span>
<span class="fc" id="L1074">    }</span>
    
    /**
     * Tests for the getDomainAxis() and getRangeAxis() methods.
     */
    @Test
    public void testAxisIndices() {
<span class="fc" id="L1081">        CategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1082">        CategoryAxis xAxis = new CategoryAxis(&quot;X&quot;);</span>
<span class="fc" id="L1083">        NumberAxis yAxis = new NumberAxis(&quot;Y&quot;);</span>
<span class="fc" id="L1084">        CategoryItemRenderer renderer = new BarRenderer();</span>
<span class="fc" id="L1085">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(dataset, xAxis, </span>
                yAxis, renderer);
<span class="fc" id="L1087">        assertEquals(xAxis, plot.getDomainAxis(0));        </span>
<span class="fc" id="L1088">        assertEquals(yAxis, plot.getRangeAxis(0)); </span>
        
<span class="fc" id="L1090">        CategoryAxis xAxis2 = new CategoryAxis(&quot;X2&quot;);</span>
<span class="fc" id="L1091">        plot.setDomainAxis(99, xAxis2);</span>
<span class="fc" id="L1092">        assertEquals(xAxis2, plot.getDomainAxis(99));</span>
        
<span class="fc" id="L1094">        NumberAxis yAxis2 = new NumberAxis(&quot;Y2&quot;);</span>
<span class="fc" id="L1095">        plot.setRangeAxis(99, yAxis2);</span>
<span class="fc" id="L1096">        assertEquals(yAxis2, plot.getRangeAxis(99));</span>
<span class="fc" id="L1097">    }</span>

    /**
     * Tests for the getDomainAxisLocation() and getRangeAxisLocation() methods.
     */
    @Test 
    public void testAxisLocationIndices() {
<span class="fc" id="L1104">        CategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1105">        CategoryAxis xAxis = new CategoryAxis(&quot;X&quot;);</span>
<span class="fc" id="L1106">        NumberAxis yAxis = new NumberAxis(&quot;Y&quot;);</span>
<span class="fc" id="L1107">        CategoryItemRenderer renderer = new BarRenderer();</span>
<span class="fc" id="L1108">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(dataset, xAxis, </span>
                yAxis, renderer);

<span class="fc" id="L1111">        CategoryAxis xAxis2 = new CategoryAxis(&quot;X2&quot;);</span>
<span class="fc" id="L1112">        NumberAxis yAxis2 = new NumberAxis(&quot;Y2&quot;);</span>
<span class="fc" id="L1113">        plot.setDomainAxis(99, xAxis2);</span>
<span class="fc" id="L1114">        plot.setRangeAxis(99, yAxis2);</span>
        
<span class="fc" id="L1116">        plot.setDomainAxisLocation(99, AxisLocation.BOTTOM_OR_RIGHT);</span>
<span class="fc" id="L1117">        assertEquals(AxisLocation.BOTTOM_OR_RIGHT, </span>
<span class="fc" id="L1118">                plot.getDomainAxisLocation(99));</span>
<span class="fc" id="L1119">        plot.setRangeAxisLocation(99, AxisLocation.BOTTOM_OR_LEFT);</span>
<span class="fc" id="L1120">        assertEquals(AxisLocation.BOTTOM_OR_LEFT, </span>
<span class="fc" id="L1121">                plot.getRangeAxisLocation(99));</span>
<span class="fc" id="L1122">    }</span>
    
    @Test 
    public void testRendererIndices() {
<span class="fc" id="L1126">        CategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1127">        CategoryAxis xAxis = new CategoryAxis(&quot;X&quot;);</span>
<span class="fc" id="L1128">        NumberAxis yAxis = new NumberAxis(&quot;Y&quot;);</span>
<span class="fc" id="L1129">        CategoryItemRenderer renderer = new BarRenderer();</span>
<span class="fc" id="L1130">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(dataset, xAxis, </span>
                yAxis, renderer);
        
<span class="fc" id="L1133">        assertEquals(renderer, plot.getRenderer(0));</span>
        
        // we should be able to give a renderer an arbitrary index
<span class="fc" id="L1136">        CategoryItemRenderer renderer2 = new LineAndShapeRenderer();</span>
<span class="fc" id="L1137">        plot.setRenderer(20, renderer2);</span>
<span class="fc" id="L1138">        assertEquals(2, plot.getRendererCount());</span>
<span class="fc" id="L1139">        assertEquals(renderer2, plot.getRenderer(20));</span>
        
<span class="fc" id="L1141">        assertEquals(20, plot.getIndexOf(renderer2));</span>
<span class="fc" id="L1142">    }</span>

    @Test 
    public void testGetRendererForDataset2() {
<span class="fc" id="L1146">        CategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1147">        CategoryAxis xAxis = new CategoryAxis(&quot;X&quot;);</span>
<span class="fc" id="L1148">        NumberAxis yAxis = new NumberAxis(&quot;Y&quot;);</span>
<span class="fc" id="L1149">        CategoryItemRenderer renderer = new BarRenderer();</span>
<span class="fc" id="L1150">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(dataset, xAxis, </span>
                yAxis, renderer);

        // add a second dataset
<span class="fc" id="L1154">        DefaultCategoryDataset&lt;String, String&gt; dataset2 = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1155">        dataset2.setValue(1, &quot;R1&quot;, &quot;C1&quot;);</span>
<span class="fc" id="L1156">        plot.setDataset(99, dataset2);</span>
       
        // by default, the renderer with index 0 is used
<span class="fc" id="L1159">        assertEquals(renderer, plot.getRendererForDataset(dataset2));</span>
        
        // add a second renderer with the same index as dataset2, now it will
        // be used
<span class="fc" id="L1163">        CategoryItemRenderer renderer2 = new LineAndShapeRenderer();</span>
<span class="fc" id="L1164">        plot.setRenderer(99, renderer2);</span>
<span class="fc" id="L1165">        assertEquals(renderer2, plot.getRendererForDataset(dataset2));</span>
<span class="fc" id="L1166">    }</span>
    
    @Test
    public void testMapDatasetToDomainAxis() {
<span class="fc" id="L1170">        CategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1171">        CategoryAxis xAxis = new CategoryAxis(&quot;X&quot;);</span>
<span class="fc" id="L1172">        NumberAxis yAxis = new NumberAxis(&quot;Y&quot;);</span>
<span class="fc" id="L1173">        CategoryItemRenderer renderer = new BarRenderer();</span>
<span class="fc" id="L1174">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(dataset, xAxis, </span>
                yAxis, renderer);

<span class="fc" id="L1177">        CategoryAxis xAxis2 = new CategoryAxis(&quot;X2&quot;);</span>
<span class="fc" id="L1178">        plot.setDomainAxis(11, xAxis2);</span>
        
        // add a second dataset
<span class="fc" id="L1181">        DefaultCategoryDataset&lt;String, String&gt; dataset2 = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1182">        dataset2.setValue(1, &quot;R1&quot;, &quot;C1&quot;);</span>
<span class="fc" id="L1183">        plot.setDataset(99, dataset);    </span>
        
<span class="fc" id="L1185">        assertEquals(xAxis, plot.getDomainAxisForDataset(99));</span>

        // now map the dataset to the second xAxis
<span class="fc" id="L1188">        plot.mapDatasetToDomainAxis(99, 11);</span>
<span class="fc" id="L1189">        assertEquals(xAxis2, plot.getDomainAxisForDataset(99));</span>
<span class="fc" id="L1190">    }</span>

    @Test
    public void testMapDatasetToRangeAxis() {
<span class="fc" id="L1194">        CategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1195">        CategoryAxis xAxis = new CategoryAxis(&quot;X&quot;);</span>
<span class="fc" id="L1196">        NumberAxis yAxis = new NumberAxis(&quot;Y&quot;);</span>
<span class="fc" id="L1197">        CategoryItemRenderer renderer = new BarRenderer();</span>
<span class="fc" id="L1198">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(dataset, xAxis, </span>
                yAxis, renderer);

<span class="fc" id="L1201">        NumberAxis yAxis2 = new NumberAxis(&quot;Y2&quot;);</span>
<span class="fc" id="L1202">        plot.setRangeAxis(22, yAxis2);</span>
        
        // add a second dataset
<span class="fc" id="L1205">        DefaultCategoryDataset&lt;String, String&gt; dataset2 = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1206">        dataset2.setValue(1, &quot;R1&quot;, &quot;C1&quot;);</span>
<span class="fc" id="L1207">        plot.setDataset(99, dataset);    </span>
        
<span class="fc" id="L1209">        assertEquals(yAxis, plot.getRangeAxisForDataset(99));</span>

        // now map the dataset to the second xAxis
<span class="fc" id="L1212">        plot.mapDatasetToRangeAxis(99, 22);</span>
<span class="fc" id="L1213">        assertEquals(yAxis2, plot.getRangeAxisForDataset(99));</span>
<span class="fc" id="L1214">    }</span>
    
    @Test
    public void testDomainMarkerIndices() {
<span class="fc" id="L1218">        CategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1219">        CategoryAxis xAxis = new CategoryAxis(&quot;X&quot;);</span>
<span class="fc" id="L1220">        NumberAxis yAxis = new NumberAxis(&quot;Y&quot;);</span>
<span class="fc" id="L1221">        CategoryItemRenderer renderer = new BarRenderer();</span>
<span class="fc" id="L1222">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(dataset, xAxis, </span>
                yAxis, renderer);
        
        // add a second dataset, plotted against a second x axis
<span class="fc" id="L1226">        DefaultCategoryDataset&lt;String, String&gt; dataset2 = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1227">        dataset2.setValue(1, &quot;R1&quot;, &quot;C1&quot;);</span>
<span class="fc" id="L1228">        plot.setDataset(99, dataset);    </span>
<span class="fc" id="L1229">        CategoryAxis xAxis2 = new CategoryAxis(&quot;X2&quot;);</span>
<span class="fc" id="L1230">        plot.setDomainAxis(1, xAxis2);</span>
<span class="fc" id="L1231">        LineAndShapeRenderer renderer2 = new LineAndShapeRenderer();</span>
<span class="fc" id="L1232">        plot.setRenderer(99, renderer2);</span>
<span class="fc" id="L1233">        plot.mapDatasetToDomainAxis(99, 1);</span>
        
<span class="fc" id="L1235">        CategoryMarker xMarker1 = new CategoryMarker(123);</span>
<span class="fc" id="L1236">        plot.addDomainMarker(99, xMarker1, Layer.FOREGROUND);</span>
<span class="fc" id="L1237">        assertTrue(plot.getDomainMarkers(99, Layer.FOREGROUND).contains(</span>
                xMarker1));
<span class="fc" id="L1239">    }</span>

    @Test
    public void testRangeMarkerIndices() {
<span class="fc" id="L1243">        CategoryDataset&lt;String, String&gt; dataset = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1244">        CategoryAxis xAxis = new CategoryAxis(&quot;X&quot;);</span>
<span class="fc" id="L1245">        NumberAxis yAxis = new NumberAxis(&quot;Y&quot;);</span>
<span class="fc" id="L1246">        CategoryItemRenderer renderer = new BarRenderer();</span>
<span class="fc" id="L1247">        CategoryPlot&lt;String, String&gt; plot = new CategoryPlot&lt;&gt;(dataset, xAxis, </span>
                yAxis, renderer);
        
        // add a second dataset, plotted against a second axis
<span class="fc" id="L1251">        DefaultCategoryDataset&lt;String, String&gt; dataset2 = new DefaultCategoryDataset&lt;&gt;();</span>
<span class="fc" id="L1252">        dataset2.setValue(1, &quot;R1&quot;, &quot;C1&quot;);</span>
<span class="fc" id="L1253">        plot.setDataset(99, dataset);    </span>
<span class="fc" id="L1254">        NumberAxis yAxis2 = new NumberAxis(&quot;Y2&quot;);</span>
<span class="fc" id="L1255">        plot.setRangeAxis(1, yAxis2);</span>
<span class="fc" id="L1256">        LineAndShapeRenderer renderer2 = new LineAndShapeRenderer();</span>
<span class="fc" id="L1257">        plot.setRenderer(99, renderer2);</span>
<span class="fc" id="L1258">        plot.mapDatasetToRangeAxis(99, 1);</span>
        
<span class="fc" id="L1260">        ValueMarker yMarker1 = new ValueMarker(123);</span>
<span class="fc" id="L1261">        plot.addRangeMarker(99, yMarker1, Layer.FOREGROUND);</span>
<span class="fc" id="L1262">        assertTrue(plot.getRangeMarkers(99, Layer.FOREGROUND).contains(</span>
                yMarker1));
<span class="fc" id="L1264">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span>jfreechart (Mar 14, 2025 5:50:17â€¯p.m.)</div></body></html>